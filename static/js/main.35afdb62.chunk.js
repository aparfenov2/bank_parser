(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[2],{336:function(e,t,n){},442:function(e,t,n){},450:function(e,t,n){"use strict";n.r(t);var a=n(24),r=n.n(a),c=n(271),i=n.n(c),s=(n(336),n(223)),o=n(324),j=n(12),l=n.n(j),u=n(285),b=n(21),d=n(482),h=n(480),f=n(477),O=n(478),x=n(483),p=n(265),m=n.n(p),v=n(213),g=n.n(v),y=n(245),w=n(123),C=n(322),_=(n(442),n(443),n(40)),S=["children","value","index"],L=n(444).DateTime,k="dd.LL.yyyy";function T(e){return L.now().minus({days:-e}).toFormat(k)}function F(e){var t=[e.value,e.setValue],n=t[1],a=t[0].map((function(e){return null!=e?Math.round(L.fromFormat(e,k).diff(L.now().startOf("day"),"days").as("days")):0})),c=function(e){n(e.map((function(e){return T(e)})))},i=r.a.useState([]),s=Object(b.a)(i,2),o=s[0],j=s[1];r.a.useEffect((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()("/ranges");case 2:t=e.sent,j(t.data.ranges.map((function(e){return{value:e,label:T(e)}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return Object(_.jsx)(h.a,{getAriaLabel:function(){return"Minimum distance shift"},value:a,min:-124,max:0,marks:o,onChange:function(e,t,n){if(Array.isArray(t))if(Math.abs(t[1]-t[0])<1)if(0===n){var a=Math.min(t[0],-1);c([a,a+1])}else{var r=Math.max(t[1],-123);c([r-1,r])}else c(t)},onChangeCommitted:e.onChangeCommitted,valueLabelDisplay:"on",valueLabelFormat:T,disableSwap:!0})}function E(e){return Object(_.jsxs)("table",{className:"cart",children:[Object(_.jsx)("thead",{children:Object(_.jsx)("tr",{children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((function(e,t){return Object(_.jsx)("td",{children:e},t)}))})}),Object(_.jsx)("tbody",{children:e.data.spd_rows&&e.data.spd_rows.map((function(e,t){return Object(_.jsx)("tr",{children:e.map((function(e,t){var n=Object(b.a)(e,3),a=n[0],r=n[1],c=n[2];return null==a?Object(_.jsx)("td",{},t):Object(_.jsxs)("td",{className:"hasTooltip",children:[a," ",Object(_.jsx)("br",{}),r,null!=c&&Object(_.jsx)("span",{className:"tooltip",dangerouslySetInnerHTML:{__html:c}})]},t)}))},t)}))})]})}function M(){var e=[].slice.call(arguments),t=e.reduce((function(e,t){return e.length>t.length?e:t}),[]);return t.map((function(t,n){return e.map((function(e){return e[n]}))}))}function N(e){var t=e.data;return Object(_.jsxs)("table",{className:"cart",children:[Object(_.jsx)("thead",{children:Object(_.jsx)("tr",{children:t.headers&&t.headers.map((function(e,t){return Object(_.jsx)("td",{children:e},t)}))})}),Object(_.jsx)("tbody",{children:t.rows&&M(t.rows,t._com).map((function(e,t){var n=Object(b.a)(e,2),a=n[0],r=n[1];return Object(_.jsx)("tr",{children:M(a,null!=r?r:[]).map((function(e,t){var n=Object(b.a)(e,2),a=n[0],r=n[1];return Object(_.jsxs)("td",{className:"hasTooltip",children:[a,null!=r&&Object(_.jsx)("span",{className:"tooltip",dangerouslySetInnerHTML:{__html:r}})]},t)}))},t)}))})]})}function P(e){var t=e.data,n=function(t){null!=e.onLinkClick&&e.onLinkClick(t.target.search)};return Object(_.jsx)("table",{width:"100%",children:Object(_.jsxs)("tbody",{children:[Object(_.jsx)("tr",{children:Object(_.jsxs)("td",{children:[" ",Object(_.jsxs)(y.b,{to:"?after="+t.prev_after+"&before="+t.prev_before,onClick:n,children:["Prev Period ",t.prev_after," - ",t.prev_before]})," "]})}),Object(_.jsx)("tr",{children:Object(_.jsxs)("td",{children:[" ",Object(_.jsxs)(y.b,{to:"?after="+t.next_after+"&before="+t.next_before,onClick:n,children:["Next Period ",t.next_after," - ",t.next_before]})," "]})}),Object(_.jsx)("tr",{children:Object(_.jsxs)("td",{children:[" ",Object(_.jsx)(y.b,{to:"/",onClick:n,children:"Last Period"})," "]})}),Object(_.jsx)("tr",{children:Object(_.jsxs)("td",{children:[" ",Object(_.jsx)(y.b,{to:"/upload",onClick:function(e){window.location.href=e.target.href},children:"Upload"})," "]})})]})})}function H(e){var t=e.children,n=e.value,a=e.index,r=Object(o.a)(e,S);return Object(_.jsx)("div",Object(s.a)(Object(s.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},r),{},{children:n===a&&Object(_.jsx)(d.a,{children:t})}))}function I(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function B(e){var t=Object.entries(e.data.by_acc_cur).filter((function(e){var t=Object(b.a)(e,2);t[0];return"total"in t[1]})).map((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];return{category:n,total:parseFloat(a.total)}})),n={};t.forEach((function(e){n[e.category]=e.total}));var r={};Object.entries(e.data.by_acc_cur_c).forEach((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];Object.values(a).forEach((function(e){n in r?r[n].push(e):r[n]=[e]}))}));var c=Object(a.useState)(!1),i=Object(b.a)(c,2),s=i[0],o=i[1],j=Object(a.useState)(null),l=Object(b.a)(j,2),u=l[0],d=l[1],h=function(){return console.log(r),Object(_.jsx)("span",{dangerouslySetInnerHTML:{__html:r[u]}})};return Object(_.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(_.jsxs)(g.a,{id:"pie",dataSource:t,palette:"Bright",title:"Expenses",onPointHoverChanged:function(e){var t=e.target,n=t.data.category;d(n),o(t.isHovered())},children:[Object(_.jsx)(v.Legend,{customizeText:function(e){return e.pointName+" "+n[e.pointName]}}),Object(_.jsx)(v.Series,{argumentField:"category",valueField:"total",children:Object(_.jsx)(v.Label,{visible:!0,children:Object(_.jsx)(v.Connector,{visible:!0,width:1})})}),Object(_.jsx)(v.Size,{width:500}),Object(_.jsx)(v.Export,{enabled:!1})]}),s&&Object(_.jsx)(h,{})]})}function A(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1];return r.a.useEffect((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()("/conf");case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(_.jsx)(C.a,{value:n,onChange:function(e){console.log("new config",e);m.a.put("/conf",e,{headers:{"Content-Type":"text/plain"},responseType:"text"})},language:"yaml",height:"400px",options:{theme:"vs-dark"}})}function D(){var e=Object(w.g)(),t=Object(w.f)(),n=Object.fromEntries(new URLSearchParams(e.search)),a=r.a.useState([n.after,n.before]),c=Object(b.a)(a,2),i=c[0],o=c[1],j=r.a.useState(n),h=Object(b.a)(j,2),p=h[0],v=h[1],g="/query"+e.search,y=r.a.useState(0),C=Object(b.a)(y,2),S=C[0],L=C[1];return r.a.useEffect((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()(g);case 2:t=e.sent,v(t.data),n=[t.data.after,t.data.before],o(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[g]),Object(_.jsxs)(f.a,{spacing:3,children:[Object(_.jsxs)("center",{children:["Summary ",p.after," - ",p.before]}),Object(_.jsxs)(f.a,{direction:"row",spacing:1,children:[Object(_.jsx)(d.a,{width:600,children:Object(_.jsx)(P,{data:p})}),Object(_.jsx)(F,{value:i,setValue:o,onChangeCommitted:function(){t.push("?after="+i[0]+"&before="+i[1])}}),Object(_.jsx)(d.a,{sx:{width:100}})]}),Object(_.jsxs)(d.a,{sx:{width:"100%"},children:[Object(_.jsx)(d.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(_.jsxs)(O.a,{value:S,onChange:function(e,t){L(t)},"aria-label":"basic tabs example",children:[Object(_.jsx)(x.a,Object(s.a)({label:"Calendar"},I(0))),Object(_.jsx)(x.a,Object(s.a)({label:"Summary"},I(1))),Object(_.jsx)(x.a,Object(s.a)({label:"Pie Chart"},I(2))),Object(_.jsx)(x.a,Object(s.a)({label:"Config"},I(3)))]})}),Object(_.jsx)(H,{value:S,index:0,children:Object(_.jsx)(E,{data:p})}),Object(_.jsx)(H,{value:S,index:1,children:Object(_.jsx)(N,{data:p})}),Object(_.jsx)(H,{value:S,index:2,children:Object(_.jsx)(B,{data:p})}),Object(_.jsx)(H,{value:S,index:3,children:Object(_.jsx)(A,{})})]})]})}var z=function(){return Object(_.jsx)(y.a,{children:Object(_.jsx)(w.c,{children:Object(_.jsx)(w.a,{path:"/",children:Object(_.jsx)(D,{})})})})},J=function(e){e&&e instanceof Function&&n.e(83).then(n.bind(null,564)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(z,{})}),document.getElementById("root")),J()}},[[450,3,4]]]);
//# sourceMappingURL=main.35afdb62.chunk.js.map